<script>
document.getElementById("pdfInput").addEventListener("change", async (e) => {
  const file = e.target.files[0];
  if (!file) return;

  try {
    const dados = await importarFaturaEquatorial(file);

    console.log("PDF importado:", dados);

    mesAno.value = dados.mes_ano || "";
    vencimento.value = dados.vencimento || "";
    consumo.value = dados.consumo_kwh ?? "";
    valor.value = dados.valor ?? "";

    if (dados.energia_geracao_kwh > 0) {
      console.info(
        "Energia solar detectada:",
        dados.energia_geracao_kwh,
        "kWh"
      );
    }

  } catch (err) {
    console.error("Erro ao importar PDF:", err);
    alert("Erro ao ler a fatura PDF");
  }
});
</script>
